parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"U7jB":[function(require,module,exports) {
"use strict";var n;Object.defineProperty(exports,"__esModule",{value:!0}),exports.DFT=void 0,function(n){var r=function(){function n(n,r){this.real=n,this.imaginary=r}return n.FromExp=function(r){return new n(Math.cos(r),Math.sin(r))},n.Sum=function(r){var t=new n(0,0);return r.forEach(function(n){return t=t.add(n)}),t},n.prototype.add=function(r){return new n(this.real+r.real,this.imaginary+r.imaginary)},n.prototype.sub=function(r){return new n(this.real-r.real,this.imaginary-r.imaginary)},n.prototype.mul=function(r){return new n(this.real*r.real-this.imaginary*r.imaginary,this.real*r.imaginary+this.imaginary*r.real)},n}();function t(n){var t=n.length,e=-2*Math.PI/t;return new Array(t).fill(0).map(function(t,i){return r.Sum(n.map(function(n,t){return r.FromExp(e*t*i).mul(n)}))})}function e(n){if(n.length%2!=0)return t(n);var i=new Array(n.length).fill(0).map(function(n,r){return r}),u=i.filter(function(n){return n%2==0}).map(function(r){return n[r]}),a=i.filter(function(n){return n%2==1}).map(function(r){return n[r]}),o=e(u),f=e(a);return i.map(function(n){return o[n%(i.length/2)].add(r.FromExp(2*-n*Math.PI/i.length).mul(f[n%(i.length/2)]))})}n.Complex=r,n.realDFT=function(n){return t(n.map(function(n){return new r(n,0)}))},n.idft=function(n){var t=n.length,e=2*Math.PI/t;return new Array(t).fill(0).map(function(i,u){return r.Sum(n.map(function(n,i){return r.FromExp(e*i*u).mul(n).mul(new r(1/t,0))}))})},n.fft=e,n.ifft=function(n){return n.map(function(n){return new r(n.real,-n.imaginary)}),e(n).map(function(t){return new r(t.real,-t.imaginary).mul(new r(1/n.length,0))})},n.realFFT=function(n){return n.length>=512&&n.length%2!=0?e(n.map(function(n){return new r(n,0)}).slice(0,n.length-1)):e(n.map(function(n){return new r(n,0)}))}}(n=exports.DFT||(exports.DFT={}));
},{}],"sd0K":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Filter=void 0,function(t){var e=function(){function t(t,e){this._f=t,this._N=e,this._offset=0,this._buffer1=new Array(this._N+1).fill(0,0,this._N+1)}return t.prototype.update=function(t){this._offset++;for(var e=this._offset%this._buffer1.length,i=e-this._N;i<0;)i+=this._buffer1.length;var s=this._buffer1[i]*this._f+t;return this._buffer1[e]=-s,s},t}();t.CombFilter=e;var i=function(){function t(t,e,i){this._f=t,this._d=e,this._N=i,this._offset=0,this._buffer1=new Array(this._N+1).fill(0,0,this._N+1),this._buffer2=new Array(2).fill(0,0,2)}return t.prototype.update=function(t){this._offset++;for(var e=this._offset%this._buffer1.length,i=e-(this._buffer1.length-1);i<0;)i+=this._buffer1.length;for(var s=this._offset%this._buffer2.length,h=s-(this._buffer2.length-1);h<0;)h+=this._buffer2.length;var n=(1-this._d)*this._buffer1[i]+this._d*this._buffer2[h],f=this._buffer1[e];return this._buffer2[s]=n,this._buffer1[e]=t+this._f*n,f},t}();t.FeedbackCombFilter=i;var s=function(){function t(t,e){this._a=t,this._D=e,this._offset=0,this._buffer1=new Array(this._D+1).fill(0,0,this._D+1)}return t.prototype.update=function(t){this._offset++;for(var e=this._offset%this._buffer1.length,i=e-this._D;i<0;)i+=this._buffer1.length;var s=this._buffer1[i]-this._a*t;return this._buffer1[e]=t+this._a*s,s},t}();t.AllpassFilter=s;var h=function(){function t(e){void 0===e&&(e=t.defaultFrequency),this.gain=.015,this.dry=0,this.frequency=44100,this._wet=1/3,this._width=1,this._wet1=this._wet*(this._width/2+.5),this._wet2=this._wet*((1-this._width)/2),this._fdnsR=[[.84,.2,1580],[.84,.2,1640],[.84,.2,1514],[.84,.2,1445],[.84,.2,1300],[.84,.2,1379],[.84,.2,1211],[.84,.2,1139]],this._fdnsL=[[.84,.2,1557],[.84,.2,1617],[.84,.2,1491],[.84,.2,1422],[.84,.2,1277],[.84,.2,1356],[.84,.2,1188],[.84,.2,1116]],this._aps=[[.5,225],[.5,556],[.5,441],[.5,341]],this._LBCF1R=[null,null,null,null],this._LBCF2R=[null,null,null,null],this._LBCF1L=[null,null,null,null],this._LBCF2L=[null,null,null,null],this._APF=[null,null,null,null];for(var h=0;h<4;h++)this._LBCF1R[h]=new i(this._fdnsR[h][0],this._fdnsR[h][1],Math.ceil(this._fdnsR[h][2]*e/t.defaultFrequency)),this._LBCF2R[h]=new i(this._fdnsR[h+4][0],this._fdnsR[h+4][1],Math.ceil(this._fdnsR[h+4][2]*e/t.defaultFrequency)),this._LBCF1L[h]=new i(this._fdnsL[h][0],this._fdnsL[h][1],Math.ceil(this._fdnsL[h][2]*e/t.defaultFrequency)),this._LBCF2L[h]=new i(this._fdnsL[h+4][0],this._fdnsL[h+4][1],Math.ceil(this._fdnsL[h+4][2]*e/t.defaultFrequency)),this._APF[h]=new s(this._aps[h][0],Math.ceil(this._aps[h][1]*e/t.defaultFrequency))}return Object.defineProperty(t.prototype,"wet",{get:function(){return this._wet},set:function(t){this._wet=t,this._wet1=this._wet*(this._width/2+.5),this._wet2=this._wet*((1-this._width)/2)},enumerable:!1,configurable:!0}),t.prototype.update=function(t,e){var i,s,h=(t+e)*this.gain,n=this._LBCF1R.map(function(t){return t.update(h)}),f=this._LBCF2R.map(function(t){return t.update(h)}),r=n.reduce(function(t,e){return t+e},0)+f.reduce(function(t,e){return t+e},0),u=this._APF[0].update(r),_=this._APF[1].update(u),l=this._APF[2].update(_);i=this._APF[3].update(l);var a=(t+e)*this.gain;n=this._LBCF1L.map(function(t){return t.update(a)}),f=this._LBCF2L.map(function(t){return t.update(a)}),r=n.reduce(function(t,e){return t+e},0)+f.reduce(function(t,e){return t+e},0),u=this._APF[0].update(r),_=this._APF[1].update(u),l=this._APF[2].update(_);return s=this._APF[3].update(l),[t*this.dry+this._wet1*i+this._wet2*s,e*this.dry+this._wet1*s+this._wet2*i]},t.defaultFrequency=44100,t}();t.Reverber=h}(t=exports.Filter||(exports.Filter={}));
},{}],"pYmQ":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../dft"),n=require("../filter"),r=function(){function t(t,e,n,r,o,i){var u=this;this._num=r,t.onclick=function(){u._setupForImpulse(),u._processClick()},e.onclick=function(){var t=Number(n.value)||100;u._setupForSignCurve(r/t),u._processClick()},this._filter=o,this._callback=i,this._g=new Array(r)}return t.prototype._setupForImpulse=function(){this._g.fill(0,0,this._num),this._g[0]=1},t.prototype._setupForSignCurve=function(t){this._g.fill(0,0,this._num);for(var e=0;e<this._num;e++)this._g[e]=Math.sin(2*e*Math.PI/t)},t.prototype._processClick=function(){for(var t=new Array,n="",r=0;r<this._num;r++)t[r]=this._filter.update(this._g[r]),n+=r+" "+t[r]+" \n";var o=Math.pow(2,Math.floor(Math.log2(this._num))),i=e.DFT.realFFT(t.slice(0,o)),u="";i.forEach(function(t,e){u+=e+" "+Math.pow(Math.pow(t.real,2)+Math.pow(t.imaginary,2),.5)+"\n"}),this._callback([n,u])},t}(),o=function(e){function r(t,r,o,i,u,a,c,l){return e.call(this,t,r,o,i,new n.Filter.FeedbackCombFilter(a,c,u),l)||this}return t(r,e),r}(r),i=function(e){function r(t,r,o,i,u,a,c){return e.call(this,t,r,o,i,new n.Filter.AllpassFilter(a,u),c)||this}return t(r,e),r}(r);function u(){var t=document.createElement("textarea");t.cols=50,t.rows=50;var e=document.createElement("textarea");e.cols=50,e.rows=50,document.body.appendChild(t),document.body.appendChild(e);var n=document.createElement("input");n.type="number",n.value="128",n.min="1",n.max=131072..toString(),document.body.appendChild(n);var r=document.createElement("button");r.innerText="CombFilterImpulseTest",document.body.appendChild(r);var u=document.createElement("button");u.innerText="CombFilterSineCurveTest",document.body.appendChild(u),new o(r,u,n,131072,1573,.84,.2,function(n){t.value=n[0],e.value=n[1]});var a=document.createElement("button");a.innerText="AllPassFilterImpulseTest",document.body.appendChild(a);var c=document.createElement("button");c.innerText="AllPassFilterSineCurveTest",document.body.appendChild(c),new i(a,c,n,131072,225,.5,function(n){t.value=n[0],e.value=n[1]})}window.addEventListener("DOMContentLoaded",u);
},{"../dft":"U7jB","../filter":"sd0K"}]},{},["pYmQ"], null)
//# sourceMappingURL=filter_test.0e9332f0.js.map